# `位元陣列`使用教學

[toc]

## 簡介

`位元陣列.js` 是一個強大的位元級別操作類別，提供了靈活的二進位操作工具，可用於存儲、查詢和操作大量位元資料。它特別適合在高效處理二進位資料時使用，例如數位通訊、壓縮或位元運算的應用場景。

------

## 如何使用

### 1. **初始化位元陣列**

可以以多種方式初始化位元陣列：

#### （1）建立空的位元陣列

```javascript
const 位元陣列 = require('./位元陣列');

// 建立空的位元陣列
const bitArray1 = new 位元陣列();
console.log(bitArray1.數量); // 輸出: 0
```

#### （2）使用二進位字串初始化

```javascript
// 根據二進位字串初始化
const bitArray2 = new 位元陣列("10101");
console.log(bitArray2.數量); // 輸出: 5
```

#### （3）使用指定的位元數量初始化

```javascript
// 使用位元數量初始化（每位元初始值為 0）
const bitArray3 = new 位元陣列(16);
console.log(bitArray3.數量); // 輸出: 16
```

------

### 2. **基本操作**

#### 取得位元狀態

查詢指定位置的位元是否為 `1`。

```javascript
const bitArray = new 位元陣列(8);
console.log(bitArray.狀態(0)); // 輸出: false，因為預設所有位元為 0
```

#### 設定位元狀態

設定指定位元為 `1` 或 `0`。

```javascript
const bitArray = new 位元陣列(8);
bitArray.設定狀態(0, true); // 設定第 0 位元為 1
console.log(bitArray.狀態(0)); // 輸出: true
```

#### 設定所有位元

將所有位元全部設定為 `1` 或 `0`。

```javascript
const bitArray = new 位元陣列(8);
bitArray.設定全部狀態(true); // 設定所有位元為 1
console.log(bitArray.轉為二進位字串()); // 輸出: "11111111"
```

#### 位元運算

`位元陣列` 支援多種邏輯運算，包括：

- **AND**

```javascript
const bitArray1 = new 位元陣列("1100");
const bitArray2 = new 位元陣列("1010");
const andResult = bitArray1.and(bitArray2);
console.log(andResult.轉為二進位字串()); // 輸出: "1000"
```

- **OR**

```javascript
const orResult = bitArray1.or(bitArray2);
console.log(orResult.轉為二進位字串()); // 輸出: "1110"
```

- **XOR**

```javascript
const xorResult = bitArray1.xor(bitArray2);
console.log(xorResult.轉為二進位字串()); // 輸出: "0110"
```

- **NOT**

```javascript
const bitArray = new 位元陣列("1100");
const notResult = bitArray.not();
console.log(notResult.轉為二進位字串()); // 輸出: "0011"
```

------

### 3. **進階操作**

#### 轉換為二進位字串

將整個位元陣列轉換為二進位字串表示：

```javascript
const bitArray = new 位元陣列(5);
bitArray.設定狀態(0, true);
bitArray.設定狀態(2, true);
console.log(bitArray.轉為二進位字串()); // 輸出: "10100"
```

#### 解析字串並設定位元

可將二進位字串解析為位元陣列：

```javascript
const bitArray = new 位元陣列();
bitArray.解析二進位字串("10101");
console.log(bitArray.轉為二進位字串()); // 輸出: "10101"
```

#### 複製位元陣列

可快速生成當前位元陣列的完整副本。

```javascript
const bitArray1 = new 位元陣列("1010");
const bitArray2 = bitArray1.複製();
console.log(bitArray2.轉為二進位字串()); // 輸出: "1010"
```

------

### 4. **詳細屬性**

#### 取得位元總數

查看位元陣列目前總位元數量：

```javascript
const bitArray = new 位元陣列(10);
console.log(bitArray.數量); // 輸出: 10
```

#### 檢查頁面數量

檢視內部分頁數量（基於每頁存儲限制）：

```javascript
const bitArray = new 位元陣列(48); // 假設每頁存儲 24 位元
console.log(bitArray.頁面數量); // 輸出: 2
```

------

### 5. **錯誤處理**

#### 初始化錯誤

- 若初始化時傳入的參數不正確（例如非法字串或負數），會拋出錯誤：

```javascript
try {
  const bitArray = new 位元陣列("10201"); // 二進位字串非法
} catch (error) {
  console.error(error.message); // 輸出: "二進位字串內容錯誤"
}
```

#### 無效的位元編號

- 在執行位元操作時，如果編號超出範圍，會導致錯誤：

```javascript
const bitArray = new 位元陣列(8);
try {
  bitArray.狀態(10); // 查詢超出範圍的位元
} catch (error) {
  console.error(error.message); // 輸出: "位元編號必須在(0,7)之間。"
}
```

------

### 綜合應用範例

```javascript
const 位元陣列 = require('./位元陣列');

// 建立位元陣列並初始化
const bitArray = new 位元陣列("10101");

// 設定位元狀態
bitArray.設定狀態(0, false); // 設定第 0 位元為 0
bitArray.設定狀態(1, true);  // 設定第 1 位元為 1

// 查詢位元
console.log(bitArray.狀態(0)); // 輸出: false
console.log(bitArray.狀態(1)); // 輸出: true

// 進行邏輯運算
const bitArray2 = new 位元陣列("11111");
const result = bitArray.and(bitArray2);
console.log(result.轉為二進位字串()); // 輸出: "00101"
```
